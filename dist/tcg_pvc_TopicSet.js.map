{"version":3,"sources":["webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue?f8ea","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue?1886","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue?74d5","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue?dfd5","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue?acf5","webpack:///node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/Topic.vue","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/TopicSet.vue?1701","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/TopicSet.vue?fcb2","webpack:///node_modules/@cityofphiladelphia/phila-vue-comps/src/components/TopicSet.vue","webpack:///./node_modules/@cityofphiladelphia/phila-vue-comps/src/components/TopicSet.vue"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","_style_loader_index_js_css_loader_index_js_vue_loader_lib_loaders_stylePostLoader_js_vue_loader_lib_index_js_vue_loader_options_Topic_vue_vue_type_style_index_0_id_511f037c_scoped_true_lang_css___WEBPACK_IMPORTED_MODULE_0__","n","push","components_Topicvue_type_script_lang_js_","name","props","components","[object Object]","this","$options","TopicComponentGroup","computed","topicKey","$props","topicsFiltered","$config","topics","filter","topic","key","length","icon","$store","state","activeTopic","dataSources","every","dataSource","targets","targetsMap","sources","Object","values","target","status","data","succeeded","hasData","isActive","showTopicOnlyIfDataExists","showTopicBasedOnOtherData","shouldShowError","console","log","errorMessage","cache","topicStatus","sourceStatuses","map","flatArray","sourceStatus","sourceStatusValue","includes","requiredData","checkForData","otherDataSources","keys","otherData","answers","otherDataSource","dataSourceKeys","dataSourceKey","methods","requiredDataSources","result","requiredDataSource","pathToDataArray","minDataLength","dataArray","basemaps","e","nextTopic","$controller","handleTopicHeaderClick","component","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","attrs","href","data-topic-key","on","click","$event","preventDefault","_v","_s","label","directives","rawName","value","expression","_e","topic-components","domProps","innerHTML","__webpack_exports__","components_TopicSetvue_type_script_lang_js_","mixins","Topic","setDefaultTopicActive","defaultTopic","_l"],"mappings":"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","file":"tcg_pvc_TopicSet.js","sourcesContent":["\nvar content = require(\"!!../../../../css-loader/index.js!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=511f037c&scoped=true&lang=css&\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../css-loader/index.js!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=511f037c&scoped=true&lang=css&\", function() {\n\t\tvar newContent = require(\"!!../../../../css-loader/index.js!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=511f037c&scoped=true&lang=css&\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import mod from \"-!../../../../style-loader/index.js!../../../../css-loader/index.js!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=511f037c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../style-loader/index.js!../../../../css-loader/index.js!../../../../vue-loader/lib/loaders/stylePostLoader.js!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=style&index=0&id=511f037c&scoped=true&lang=css&\"","exports = module.exports = require(\"../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n/*REVIEW these aren't prefixed `mb-`because they're scoped, but it feels\\ninconsistent?*/\\n.topic-header[data-v-511f037c] {\\n  background: #f5f5f5;\\n  border: 1px solid #ddd;\\n  display: block;\\n  font-size: 18px;\\n  font-weight: normal;\\n  min-height: 70px;\\n  line-height: 25px;\\n  padding: 10px;\\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\\n  margin-bottom: 8px;\\n  display: flex;\\n  flex-direction: row;\\n  flex-wrap: nowrap;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n.topic-header[data-v-511f037c]:hover {\\n  background: #fff;\\n  color: inherit;\\n}\\n.topic-header-content[data-v-511f037c] {\\n  display: flex;\\n  flex-direction: row;\\n  align-items: center;\\n}\\n.topic-header-icon[data-v-511f037c] {\\n  padding-left: 10px;\\n  padding-right: 10px;\\n}\\n.topic-header-label-holder[data-v-511f037c] {\\n  margin-left: 15px;\\n}\\n.topic-body[data-v-511f037c] {\\n  padding: 5px;\\n  margin-bottom: 10px;\\n}\\n.topic-body-enter-active[data-v-511f037c], .topic-body-leave-active[data-v-511f037c] {\\n  transition: opacity 0.18s;\\n}\\n.topic-body-enter[data-v-511f037c], .topic-body-leave-to[data-v-511f037c] {\\n  opacity: 0;\\n}\\n\", \"\"]);\n\n// exports\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.shouldShowTopic)?_c('div',[(_vm.shouldShowHeader)?_c('a',{staticClass:\"topic-header\",attrs:{\"href\":\"#\",\"data-topic-key\":_vm.topicKey},on:{\"click\":function($event){$event.preventDefault();return _vm.handleTopicHeaderClick($event)}}},[_c('div',{staticClass:\"topic-header-content\"},[_c('font-awesome-icon',{attrs:{\"icon\":_vm.icon}}),_vm._v(\" \"),_c('div',{staticClass:\"topic-header-label-holder\"},[_vm._v(\"\\n        \"+_vm._s(_vm.topic.label)+\"\\n      \")])],1),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status === 'waiting'),expression:\"status === 'waiting'\"}],staticClass:\"loading\"},[_c('font-awesome-icon',{staticClass:\"fa-lg spin\",attrs:{\"icon\":\"spinner\"}})],1)]):_vm._e(),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"topic-body\"}},[(_vm.shouldShowBody)?_c('div',{staticClass:\"topic-body\",attrs:{\"data-topic-key\":_vm.topicKey}},[_c('topic-component-group',{attrs:{\"topic-components\":_vm.topic.components}})],1):_vm._e()]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shouldShowError),expression:\"shouldShowError\"}],staticClass:\"topic-body\",domProps:{\"innerHTML\":_vm._s(this.errorMessage)}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../vue-loader/lib/index.js??vue-loader-options!./Topic.vue?vue&type=script&lang=js&\"","<template>\r\n  <div v-if=\"shouldShowTopic\">\r\n  <!-- <div> -->\r\n    <a href=\"#\"\r\n       class=\"topic-header\"\r\n       @click.prevent=\"handleTopicHeaderClick\"\r\n       v-if=\"shouldShowHeader\"\r\n       :data-topic-key=\"topicKey\"\r\n    >\r\n      <div class='topic-header-content'>\r\n        <font-awesome-icon :icon=\"icon\" />\r\n        <div class='topic-header-label-holder'>\r\n          {{ topic.label }}\r\n        </div>\r\n      </div>\r\n      <!-- <div class=\"loading\"> -->\r\n      <span v-show=\"status === 'waiting'\" class=\"loading\">\r\n        <font-awesome-icon icon=\"spinner\" class=\"fa-lg spin\" />\r\n      </span>\r\n      <!-- </div> -->\r\n    </a>\r\n\r\n    <!-- success -->\r\n    <transition name=\"topic-body\">\r\n      <div class=\"topic-body\"\r\n           v-if=\"shouldShowBody\"\r\n           :data-topic-key=\"topicKey\"\r\n      >\r\n        <topic-component-group :topic-components=\"topic.components\" />\r\n      </div>\r\n    </transition>\r\n\r\n    <!-- error -->\r\n    <div class=\"topic-body\"\r\n         v-show=\"shouldShowError\"\r\n         v-html=\"this.errorMessage\"\r\n    >\r\n    <!-- Could not locate records for that address. -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import TopicComponentGroup from './TopicComponentGroup.vue';\r\n\r\n  export default {\r\n    name: 'Topic',\r\n    props: ['topicKey'],\r\n    components: {},\r\n    beforeCreate() {\r\n      this.$options.components.TopicComponentGroup = TopicComponentGroup;\r\n    },\r\n    computed: {\r\n      // returns the full config object for the topic\r\n      topic() {\r\n        const topicKey = this.$props.topicKey;\r\n        const topicsFiltered = this.$config.topics.filter((topic) => {\r\n          return topic.key === this.$props.topicKey;\r\n        });\r\n        if (topicsFiltered.length !== 1) {\r\n          throw `Could not get single config object for topic '${topicKey}'.`;\r\n        }\r\n        const config = topicsFiltered[0];\r\n        return config;\r\n      },\r\n      icon() {\r\n        return this.topic.icon;\r\n      },\r\n      isActive() {\r\n        const key = this.topic.key;\r\n        const activeTopic = this.$store.state.activeTopic;\r\n        return activeTopic === key;\r\n      },\r\n      shouldShowHeader() {\r\n        return this.$config.topics.length > 1;\r\n      },\r\n      dataSources() {\r\n        return this.topic.dataSources || [];\r\n      },\r\n      hasData() {\r\n        // console.log(this.topicKey, '-', 'hasData?', this.dataSources);\r\n\r\n        // make sure the following is true for all data sources\r\n        const hasData = this.dataSources.every(dataSource => {\r\n          const targetsFn = this.$config.dataSources[dataSource].targets;\r\n\r\n          // if the data source is configured for targets\r\n          if (targetsFn) {\r\n            const targetsMap = this.$store.state.sources[dataSource].targets;\r\n            const targets = Object.values(targetsMap);\r\n\r\n            // but there are no targets for this address, return false\r\n            if (targets.length === 0) {\r\n              return false;\r\n            }\r\n\r\n            // if there are targets for this address, make sure none of them\r\n            // are \"waiting\"\r\n            return targets.every(target => target.status !== 'waiting');\r\n\r\n          // if the data source is not configured for targets, just check that\r\n          // it has data\r\n          } else {\r\n            return !!this.$store.state.sources[dataSource].data;\r\n          }\r\n        });\r\n\r\n        return hasData;\r\n      },\r\n      shouldShowBody() {\r\n        const succeeded = this.status === 'success';\r\n        const hasData = this.hasData;\r\n        const should = succeeded && hasData && this.isActive;\r\n        return should;\r\n      },\r\n      shouldShowTopic() {\r\n        if (!this.topic.showTopicOnlyIfDataExists) {\r\n          return true;\r\n        // if showTopicOnlyIfDataExists, but you want to overrule that\r\n        } else if (this.showTopicBasedOnOtherData) {\r\n          return true;\r\n        // if showTopicOnlyIfDataExists and it is not overrulled\r\n        } else {\r\n          return this.showTopicOnlyIfDataExists;\r\n        }\r\n      },\r\n      shouldShowError() {\r\n        const shouldShowError = (\r\n          // topic must be active and\r\n          this.isActive && (\r\n            // there either has to be an error or\r\n            this.status === 'error' ||\r\n            // we got the response and it's empty\r\n            (this.status !== 'waiting' && !this.hasData)\r\n          )\r\n        );\r\n        shouldShowError && console.log('BINGO BINGO BINGO:', this.topicKey, 'shouldShowError:', shouldShowError, 'status:', this.status, 'hasData:', this.hasData);\r\n        return shouldShowError;\r\n      },\r\n      errorMessage() {\r\n        if (this.topic.errorMessage) {\r\n          return this.topic.errorMessage(this.$store.state);\r\n        } else {\r\n          return 'Could not locate records for that address.';\r\n        }\r\n      },\r\n      // REVIEW this is getting cached and not updating when the deps update\r\n      status: {\r\n        cache: false,\r\n        get() {\r\n          // get the status of each source\r\n          const dataSources = this.topic.dataSources || [];\r\n\r\n          // if no sources, return success\r\n          if (dataSources.length === 0) {\r\n            return 'success';\r\n          }\r\n\r\n          let topicStatus;\r\n          const sourceStatuses = dataSources.map(dataSource => {\r\n            const targetsFn = this.$config.dataSources[dataSource].targets;\r\n\r\n            // if the data source is configured for targets\r\n            if (targetsFn) {\r\n              const targetsMap = this.$store.state.sources[dataSource].targets;\r\n              const targets = Object.values(targetsMap);\r\n\r\n              // but there are no targets for this address, return false\r\n              if (targets.length === 0) {\r\n                return;\r\n              }\r\n\r\n              // if there are targets for this address, make sure none of them\r\n              // are \"waiting\"\r\n              return targets.map(target => {\r\n                return target.status\r\n              });\r\n\r\n            // if the data source is not configured for targets, just check that\r\n            // it has data\r\n            } else {\r\n              return [this.$store.state.sources[dataSource].status];\r\n            }\r\n          });\r\n\r\n          let flatArray = []\r\n          for (let sourceStatus of sourceStatuses) {\r\n            if (sourceStatus) {\r\n              for (let sourceStatusValue of sourceStatus) {\r\n                flatArray.push(sourceStatusValue);\r\n              }\r\n            }\r\n          }\r\n\r\n          if (flatArray.includes('waiting')) {\r\n            topicStatus = 'waiting';\r\n          } else if (flatArray.includes('error')) {\r\n            topicStatus = 'error';\r\n          } else {\r\n            topicStatus = 'success';\r\n          }\r\n          return topicStatus;\r\n        }\r\n      },\r\n      showTopicBasedOnOtherData() {\r\n        // stop if \"showTopicBasedOnOtherData\" doesn't exist\r\n        if (!this.topic.showTopicBasedOnOtherData) {\r\n          return false;\r\n        }\r\n\r\n        // stop if the required data for this topic does not exist\r\n        const requiredData = this.topic.showTopicBasedOnOtherData.requiredData;\r\n        let requiredDataExists = this.checkForData(requiredData);\r\n        // console.log('requiredDataExists:', requiredDataExists);\r\n        if (!requiredDataExists) {\r\n          return false;\r\n        }\r\n\r\n        // continue if the other data does not match the conditions put into the \"showTopicBasedOnOtherData\" object\r\n        const otherDataSources = Object.keys(this.topic.showTopicBasedOnOtherData.otherData);\r\n        let answers = [];\r\n        for (let otherDataSource of otherDataSources) {\r\n          const dataSource = this.topic.showTopicBasedOnOtherData.otherData[otherDataSource];\r\n          const dataSourceKeys = Object.keys(dataSource);\r\n          for (let dataSourceKey of dataSourceKeys) {\r\n            if (this.$store.state.sources[otherDataSource][dataSourceKey] === dataSource[dataSourceKey]) {\r\n              answers.push(true);\r\n            } else {\r\n              answers.push(false);\r\n            }\r\n          }\r\n        }\r\n        if (!answers.includes(false)) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      showTopicOnlyIfDataExists() {\r\n        return this.checkForData(this.topic.showTopicOnlyIfDataExists);\r\n      },\r\n    },\r\n    methods: {\r\n      checkForData(requiredData) {\r\n        const requiredDataSources = Object.keys(requiredData);\r\n        // console.log('checkForData is running, requiredData:', requiredData, 'requiredDataSources:', requiredDataSources);\r\n        let result = true;\r\n        for (let requiredDataSource of requiredDataSources) {\r\n          const pathToDataArray = requiredData[requiredDataSource].pathToDataArray;\r\n          const minDataLength = requiredData[requiredDataSource].minDataLength;\r\n          let dataArray;\r\n          if (!this.$store.state.sources[requiredDataSource].data) {\r\n            // if there is no data (yet)\r\n            return false;\r\n          } else {\r\n            if (!pathToDataArray) {\r\n              dataArray = this.$store.state.sources[requiredDataSource].data;\r\n            } else if (pathToDataArray.length === 1) {\r\n              dataArray = this.$store.state.sources[requiredDataSource].data[pathToDataArray[0]];\r\n            }\r\n            // TODO - implement system if the path to the data is longer than a single step\r\n            // else {\r\n              //   dataArray = this.$store.state.sources[requiredDataSource].data[pathToDataArray[0]].[pathToDataArray[1]];\r\n              // }\r\n            if (dataArray.length < minDataLength) {\r\n              result = false\r\n            }\r\n          }\r\n        }\r\n        return result;\r\n      },\r\n      configForBasemap(key) {\r\n        return this.$config.map.basemaps[key];\r\n      },\r\n\r\n      handleTopicHeaderClick(e) {\r\n        const topic = this.$props.topicKey;\r\n        let nextTopic;\r\n\r\n        if (topic !== this.$store.state.activeTopic) {\r\n          nextTopic = topic;\r\n        }\r\n\r\n        // notify controller (which will handle routing)\r\n        this.$controller.handleTopicHeaderClick(nextTopic);\r\n      },\r\n    }\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  /*REVIEW these aren't prefixed `mb-`because they're scoped, but it feels\r\n  inconsistent?*/\r\n  .topic-header {\r\n    background: #f5f5f5;\r\n    border: 1px solid #ddd;\r\n    display: block;\r\n    font-size: 18px;\r\n    font-weight: normal;\r\n    min-height: 70px;\r\n    line-height: 25px;\r\n    padding: 10px;\r\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n    margin-bottom: 8px;\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: nowrap;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n  }\r\n\r\n  .topic-header:hover {\r\n    background: #fff;\r\n    color: inherit;\r\n  }\r\n\r\n  .topic-header-content {\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n  }\r\n\r\n  .topic-header-icon {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n  }\r\n\r\n  .topic-header-label-holder {\r\n    margin-left: 15px;\r\n  }\r\n\r\n  .topic-body {\r\n    padding: 5px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .topic-body-enter-active, .topic-body-leave-active {\r\n    transition: opacity 0.18s;\r\n  }\r\n\r\n  .topic-body-enter, .topic-body-leave-to {\r\n    opacity: 0;\r\n  }\r\n</style>\r\n","import { render, staticRenderFns } from \"./Topic.vue?vue&type=template&id=511f037c&scoped=true&\"\nimport script from \"./Topic.vue?vue&type=script&lang=js&\"\nexport * from \"./Topic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Topic.vue?vue&type=style&index=0&id=511f037c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"511f037c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((this.$config.topics),function(topic){return _c('topic',{key:topic.key,attrs:{\"topicKey\":topic.key}})}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../vue-loader/lib/index.js??vue-loader-options!./TopicSet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../vue-loader/lib/index.js??vue-loader-options!./TopicSet.vue?vue&type=script&lang=js&\"","<template>\r\n  <div>\r\n    <topic v-for=\"topic in this.$config.topics\"\r\n           :topicKey=\"topic.key\"\r\n           :key=\"topic.key\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Topic from './Topic.vue';\r\n  import TopicComponent from './TopicComponent.vue';\r\n\r\n  export default {\r\n    mixins: [TopicComponent],\r\n    name: 'TopicSet',\r\n    components: {\r\n      Topic,\r\n    },\r\n    mounted() {\r\n      if (this.$store.state.activeTopic === null || this.$store.state.activeTopic === '') {\r\n        this.setDefaultTopicActive();\r\n      }\r\n    },\r\n    methods: {\r\n      setDefaultTopicActive() {\r\n        if (this.$props.options.defaultTopic) {\r\n          this.$store.state.activeTopic = this.$props.options.defaultTopic;\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n","import { render, staticRenderFns } from \"./TopicSet.vue?vue&type=template&id=70d32a60&\"\nimport script from \"./TopicSet.vue?vue&type=script&lang=js&\"\nexport * from \"./TopicSet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}